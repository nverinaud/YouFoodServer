<% content_for :js do %>
	<script type="text/javascript">
		
		var $emailField = $('#restaurant_restaurant_manager_attributes_email');
		var $restaurantNameField = $('#restaurant_name');

		$restaurantNameField.keyup(function(){
			update_email_field();
		});

		function make_email(str) 
		{
			if (str == undefined)
				return "";

			var email = str.toLowerCase();
			var splitted = email.split(' ');
			email = splitted.join('_');
			email += "@youfood.com";
			return email;
		}

		function update_email_field()
		{
			var rawName = $restaurantNameField.val();
			$emailField.attr('value', make_email(rawName))
		}

		$(document).ready(function(){
			update_email_field();
		});

	</script>
<% end %>